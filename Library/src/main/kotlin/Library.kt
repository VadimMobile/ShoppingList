package libraryandbook

class Library(private val books: MutableList<Book>) {

    class BookNotFoundException() : Exception("Данной книги нет в наличии")

    private val sortedBooks: List<Book>
        get() {
            return books
        }

    init {
        repeat(1000) {
            val newBook = getRandomBook()
            books.add(newBook)
        }
    }

    fun sortedBook(){
        val sortedForTittle = sortedBooks.sortedBy { it.title }
        println(sortedForTittle)
        val sortedForAuthor = sortedBooks.sortedBy { it.author }
        println(sortedForAuthor)
        val sortedForPrice = sortedBooks.sortedByDescending { it.price }
        println(sortedForPrice)
    }

    fun chooseBook(
        maxPrice: Int,
        title: String,
        authorName: String
    ): Book {
        val foundBook = books.find {
            it.price <= maxPrice &&
                    it.title == title &&
                    it.author == authorName
        }
        if (foundBook != null) {
            return foundBook
        } else
            throw BookNotFoundException()
    }

    private fun getRandomBook(): Book {
        val randomAuthor = listOf(
            "Алексей Морозов",
            "Ирина Ковальская",
            "Дмитрий Лебедев",
            "София Гринберг",
            "Николай Чернов",
            "Мария Соколова",
            "Павел Волков",
            "Анна Руднева",
            "Сергей Климов",
            "Ольга Воронцова",
            "Виктор Андреев",
            "Елена Кузьмина",
            "Артём Гаврилов",
            "Наталья Орлова",
            "Константин Жуков",
            "Татьяна Беляева",
            "Михаил Карпов",
            "Ксения Литвинова",
            "Андрей Фёдоров",
            "Полина Синицына",
            "Иван Громов",
            "Дарья Кравцова",
            "Владислав Егоров",
            "Екатерина Шестакова",
            "Роман Петров",
            "Алина Васильева",
            "Кирилл Соловьёв",
            "Вероника Мельникова",
            "Олег Никитин",
            "Юлия Смирнова",
            "Максим Белов",
            "Виктория Козлова",
            "Денис Сафонов",
            "Лидия Павлова",
            "Евгений Трофимов",
            "Валерия Зайцева",
            "Аркадий Степанов",
            "Инна Фролова",
            "Григорий Кузнецов",
            "Светлана Ларионова",
            "Тимур Захаров",
            "Анастасия Голубева",
            "Влад Костин",
            "Оксана Миронова",
            "Леонид Сидоров",
            "Алёна Григорьева",
            "Фёдор Михайлов",
            "Вера Капустина",
            "Георгий Лаптев",
            "Маргарита Соловьёва",
            "Арсений Богданов",
            "Юлия Тарасова",
            "Никита Ширяев",
            "Елизавета Бондарь",
            "Валентин Савельев",
            "Ольга Киселёва",
            "Степан Рябов",
            "Кристина Долгова",
            "Владислав Шаповалов",
            "Анна Куликова",
            "Денис Лобанов",
            "Виктория Гончарова",
            "Артём Сидоренко",
            "Марина Кравченко",
            "Константин Пахомов",
            "Елена Лебедева",
            "Алексей Гусев",
            "Татьяна Панкратова",
            "Дмитрий Шевцов",
            "Ольга Федорова",
            "Николай Синицын",
            "Полина Козина",
            "Сергей Лапшин",
            "Анастасия Ермакова",
            "Роман Куликов",
            "Ксения Платонова",
            "Андрей Мельников",
            "Валерия Суханова",
            "Виктор Гаврилов",
            "Юлия Черкасова",
            "Аркадий Николаев",
            "Инна Сорокина",
            "Иван Тихонов",
            "Ольга Климова",
            "Кирилл Лавров",
            "Мария Королёва",
            "Павел Сидоров",
            "Екатерина Литвинова",
            "Артём Козлов",
            "Наталья Белова",
            "Максим Орлов",
            "Татьяна Соловьёва",
            "Денис Громов",
            "Виктория Андреева",
            "Владислав Карпов",
            "Светлана Никитина",
            "Константин Фёдоров",
            "Полина Гаврилова",
            "Сергей Волков",
            "Анна Морозова"
        )

        val randomTitle = listOf(
            "Тени над городом",
            "Последний рассвет",
            "Хранитель времени",
            "Забытые голоса",
            "Пепел и звёзды",
            "Дорога в никуда",
            "Сердце пустыни",
            "Осколки памяти",
            "Тайна старого замка",
            "Город без лиц",
            "Падение небес",
            "Свет сквозь тьму",
            "Мост через вечность",
            "Ключ от прошлого",
            "Песнь ветра",
            "Огненные крылья",
            "Сны о будущем",
            "Тайный сад",
            "Зов океана",
            "Пленники времени",
            "Зеркало души",
            "Танец теней",
            "Путь в бездну",
            "Хрустальный мир",
            "Гроза над степью",
            "Звёздный странник",
            "Обречённые",
            "Серебряный рассвет",
            "Тайна двух сердец",
            "Город забытых",
            "Пламя надежды",
            "Сквозь лабиринт",
            "Вечный странник",
            "Песнь дождя",
            "Огни большого города",
            "Тайна глубин",
            "Зов предков",
            "Сны о свободе",
            "Пленники иллюзий",
            "Зеркало времени",
            "Танец огня",
            "Путь героя",
            "Хрустальные сны",
            "Гроза над морем",
            "Звёздный путь",
            "Обречённая любовь",
            "Серебряные крылья",
            "Тайна трёх дорог",
            "Город теней",
            "Пламя судьбы",
            "Сквозь бурю",
            "Вечный огонь",
            "Песнь земли",
            "Огни надежды",
            "Тайна горизонта",
            "Зов тишины",
            "Сны о вечности",
            "Пленники грёз",
            "Зеркало рассвета",
            "Танец света",
            "Путь странника",
            "Хрустальные небеса",
            "Гроза над горами",
            "Звёздный огонь",
            "Обречённый путь",
            "Серебряная ночь",
            "Тайна забвения",
            "Город надежды",
            "Пламя свободы",
            "Сквозь время",
            "Вечный рассвет",
            "Песнь сердца",
            "Огни судьбы",
            "Тайна луны",
            "Зов ветра",
            "Сны о любви",
            "Пленники тьмы",
            "Зеркало грозы",
            "Танец судьбы",
            "Путь к свету",
            "Хрустальный рассвет",
            "Гроза над лесом",
            "Звёздный рассвет",
            "Обречённые сердца",
            "Серебряный путь",
            "Тайна рассвета",
            "Город огней",
            "Пламя вечности",
            "Сквозь мглу",
            "Вечный путь",
            "Песнь свободы",
            "Огни рассвета",
            "Тайна небес",
            "Зов судьбы",
            "Сны о рассвете",
            "Пленники звёзд",
            "Зеркало надежды",
            "Танец грёз",
            "Путь к мечте",
            "Хрустальная звезда"
        )

        val randomPrice: Int = (1..200).random()

        return Book(
            price = randomPrice,
            title = randomTitle.random(),
            author = randomAuthor.random(),
        )
    }
}

fun main() {
    val library = Library(mutableListOf())
    try {
        library.sortedBook()
        val foundBook = library.chooseBook(
            maxPrice = 200,
            title = "Хранитель времени",
            authorName = "Максим Орлов"
        )
        println("Результат поиска: $foundBook")
    } catch (e: Library.BookNotFoundException){
        println(e.message) // println потому что код писал в идее
        println("Конец программы")
    }
}
